<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calibrate naomi model outputs — calibrate_outputs • naomi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calibrate naomi model outputs — calibrate_outputs"><meta property="og:description" content="Calibrate naomi model outputs"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">naomi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.9.27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-model.html">Naomi data model</a>
    </li>
    <li>
      <a href="../articles/model-workflow.html">Naomi Model Workflow Example</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calibrate naomi model outputs</h1>
    
    <div class="hidden name"><code>calibrate_outputs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calibrate naomi model outputs</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calibrate_outputs</span><span class="op">(</span></span>
<span>  <span class="va">output</span>,</span>
<span>  <span class="va">naomi_mf</span>,</span>
<span>  <span class="va">spectrum_plhiv_calibration_level</span>,</span>
<span>  <span class="va">spectrum_plhiv_calibration_strat</span>,</span>
<span>  <span class="va">spectrum_artnum_calibration_level</span>,</span>
<span>  <span class="va">spectrum_artnum_calibration_strat</span>,</span>
<span>  <span class="va">spectrum_aware_calibration_level</span>,</span>
<span>  <span class="va">spectrum_aware_calibration_strat</span>,</span>
<span>  <span class="va">spectrum_infections_calibration_level</span>,</span>
<span>  <span class="va">spectrum_infections_calibration_strat</span>,</span>
<span>  calibrate_method <span class="op">=</span> <span class="st">"logistic"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>output</dt>
<dd><p>Naomi model output package produced by <code><a href="output_package.html">output_package()</a></code>.</p></dd>


<dt>naomi_mf</dt>
<dd><p>Naomi model frame, objective of class <code>naomi_mf</code>.</p></dd>


<dt>spectrum_plhiv_calibration_level</dt>
<dd><p>Level to calibrate PLHIV, see details.</p></dd>


<dt>spectrum_plhiv_calibration_strat</dt>
<dd><p>Age/sex stratification to calibrate PLHIV, see details.</p></dd>


<dt>spectrum_artnum_calibration_level</dt>
<dd><p>Level to calibrate number on ART, see details.</p></dd>


<dt>spectrum_artnum_calibration_strat</dt>
<dd><p>Age/sex stratification to calibrate number on ART, see details.</p></dd>


<dt>spectrum_aware_calibration_level</dt>
<dd><p>Level to calibrate number aware of HIV positive status, see details.</p></dd>


<dt>spectrum_aware_calibration_strat</dt>
<dd><p>Age/sex stratification to calibrate number aware of HIV positive status, see details.</p></dd>


<dt>spectrum_infections_calibration_level</dt>
<dd><p>Level to calibrate number infections of HIV positive status, see details.</p></dd>


<dt>spectrum_infections_calibration_strat</dt>
<dd><p>Age/sex stratification to calibrate number infections of HIV positive status, see details.</p></dd>


<dt>calibrate_method</dt>
<dd><p>Calibration method, either <code>"logistic"</code> (default) or <code>"proportional"</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The following indicators are calibrated:</p><ul><li><p><code>plhiv</code></p></li>
<li><p><code>art_current_residents</code></p></li>
<li><p><code>unaware_plhiv_num</code></p></li>
<li><p><code>infections</code></p></li>
<li><p><code>art_current</code> (attending)</p></li>
<li><p><code>aware_plhiv_num</code></p></li>
<li><p><code>untreated_plhiv_num</code></p></li>
<li><p><code>prevalence</code></p></li>
<li><p><code>art_coverage</code></p></li>
<li><p><code>aware_plhiv_prop</code></p></li>
<li><p><code>incidence</code></p></li>
<li><p><code>plhiv_attend</code></p></li>
<li><p><code>aware_plhiv_attend</code></p></li>
</ul><p>Steps in the calibration:</p><ol><li><p>Aggregate Spectrum totals to specified stratification by level/sex/age to
calculate the target totals within each stratification.</p></li>
<li><p>Adjust fine area/sex/age-group mean values to match targeted total using
either "logistic" or "proportional" scaling.</p></li>
<li><p>Aggregate revised mean count values to all stratifications of Naomi outputs.</p></li>
<li><p>Calculate calibrated mean for proportion indicators.</p></li>
<li><p>Adjust outputs for all statistics (mean, median, mode, se, range).</p></li>
<li><p>Aggregate totals spectrum_calibration table.</p></li>
</ol><p>The "logistic" scaling method converts fine counts to logit proportions, then
uses numerical optimisation to solve the logit-scale adjustment to the fine
district/sex/age proportions such that the adjusted proportions times the
denominator sums to the target value.</p>
<p>Calibration proceeds sequentially through the following indicators.</p><ul><li><p>PLHIV</p></li>
<li><p>Number of residents on ART</p></li>
<li><p>Number unaware of HIV status</p></li>
<li><p>Number of new infections</p></li>
<li><p>Number of attending ANC by district</p></li>
</ul><p>Calibration of a previous indicator may affect the denominator for the next
indicator. This does not affect the calculation for proportional scaling,
but will affect logistic scaling. Inconsistent selections for calibration
levels or stratifications could result in a denominator smaller than a target
numerator for a particular value. This will throw an error for logistic
scaling methods.</p>
<p>The number of attending ARG clients is always calibrated proportionally by
sex and five-year age group to the number or residents attending.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeff Eaton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

