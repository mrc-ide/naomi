<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Select data for model fitting — select_naomi_data • naomi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Select data for model fitting — select_naomi_data"><meta property="og:description" content="Select data for model fitting"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">naomi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.9.27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-model.html">Naomi data model</a>
    </li>
    <li>
      <a href="../articles/model-workflow.html">Naomi Model Workflow Example</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Select data for model fitting</h1>
    
    <div class="hidden name"><code>select_naomi_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Select data for model fitting</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">select_naomi_data</span><span class="op">(</span></span>
<span>  <span class="va">naomi_mf</span>,</span>
<span>  <span class="va">survey_hiv_indicators</span>,</span>
<span>  <span class="va">anc_testing</span>,</span>
<span>  <span class="va">art_number</span>,</span>
<span>  <span class="va">prev_survey_ids</span>,</span>
<span>  <span class="va">artcov_survey_ids</span>,</span>
<span>  <span class="va">recent_survey_ids</span>,</span>
<span>  vls_survey_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  artnum_calendar_quarter_t1 <span class="op">=</span> <span class="va">naomi_mf</span><span class="op">[[</span><span class="st">"calendar_quarter1"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  artnum_calendar_quarter_t2 <span class="op">=</span> <span class="va">naomi_mf</span><span class="op">[[</span><span class="st">"calendar_quarter2"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  anc_clients_year_t2 <span class="op">=</span></span>
<span>    <span class="fu"><a href="quarter_year_labels.html">year_labels</a></span><span class="op">(</span><span class="fu"><a href="quarter_year_labels.html">calendar_quarter_to_quarter_id</a></span><span class="op">(</span><span class="va">naomi_mf</span><span class="op">[[</span><span class="st">"calendar_quarter2"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  anc_clients_year_t2_num_months <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  anc_prev_year_t1 <span class="op">=</span></span>
<span>    <span class="fu"><a href="quarter_year_labels.html">year_labels</a></span><span class="op">(</span><span class="fu"><a href="quarter_year_labels.html">calendar_quarter_to_quarter_id</a></span><span class="op">(</span><span class="va">naomi_mf</span><span class="op">[[</span><span class="st">"calendar_quarter1"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  anc_prev_year_t2 <span class="op">=</span></span>
<span>    <span class="fu"><a href="quarter_year_labels.html">year_labels</a></span><span class="op">(</span><span class="fu"><a href="quarter_year_labels.html">calendar_quarter_to_quarter_id</a></span><span class="op">(</span><span class="va">naomi_mf</span><span class="op">[[</span><span class="st">"calendar_quarter2"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  anc_artcov_year_t1 <span class="op">=</span> <span class="va">anc_prev_year_t1</span>,</span>
<span>  anc_artcov_year_t2 <span class="op">=</span> <span class="va">anc_prev_year_t2</span>,</span>
<span>  use_kish_prev <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  deff_prev <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  use_kish_artcov <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  deff_artcov <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  use_kish_recent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  deff_recent <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  use_kish_vls <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  deff_vls <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  use_survey_aggregate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  spec_program_data <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>naomi_mf</dt>
<dd><p>A Naomi model frame object.</p></dd>


<dt>survey_hiv_indicators</dt>
<dd><p>Data frame of survey estimates, or NULL to exclude any survey data.</p></dd>


<dt>anc_testing</dt>
<dd><p>Data frame of ANC routine testing outcomes, or NULL to exclude any ANC data.</p></dd>


<dt>art_number</dt>
<dd><p>Data frame of number currently receiving ART, or NULL to exclude any ART data.</p></dd>


<dt>prev_survey_ids</dt>
<dd><p>A character vector of <code>survey_id</code>s for prevalence data.</p></dd>


<dt>artcov_survey_ids</dt>
<dd><p>A character vector of <code>survey_id</code>s for ART coverage data.</p></dd>


<dt>recent_survey_ids</dt>
<dd><p>A character vector of <code>survey_id</code>s for recent HIV infection status.</p></dd>


<dt>vls_survey_ids</dt>
<dd><p>A character vector of <code>survey_id</code>s for survey VLS among all HIV+ persons.</p></dd>


<dt>artnum_calendar_quarter_t1</dt>
<dd><p>Calendar quarter for first time point for number on ART.</p></dd>


<dt>artnum_calendar_quarter_t2</dt>
<dd><p>Calendar quarter for second time point for number on ART.</p></dd>


<dt>anc_clients_year_t2</dt>
<dd><p>Calendar year (possibly multiple) for number of ANC clients at year 2.</p></dd>


<dt>anc_prev_year_t1</dt>
<dd><p>Calendar year (possibly multiple) for first time point for ANC prevalence.</p></dd>


<dt>anc_prev_year_t2</dt>
<dd><p>Calendar year (possibly multiple) for second time point for ANC prevalence.</p></dd>


<dt>anc_artcov_year_t1</dt>
<dd><p>Calendar year (possibly multiple) for first time point for ANC ART coverage.</p></dd>


<dt>anc_artcov_year_t2</dt>
<dd><p>Calendar year (possibly multiple) for second time point for ANC ART coverage.</p></dd>


<dt>deff_prev</dt>
<dd><p>Approximate design effect for survey prevalence.</p></dd>


<dt>deff_artcov</dt>
<dd><p>Approximate design effect for survey ART coverage.</p></dd>


<dt>deff_recent</dt>
<dd><p>Approximate design effect for survey proportion recently infected.</p></dd>


<dt>deff_vls</dt>
<dd><p>Approximate design effect for survey viral load suppression.</p></dd>


<dt>spec_program_data</dt>
<dd><p>Object of class <code>"spec_program_data"</code> consisting of aggregated program data inputs to Spectrum. Provided for checking against Naomi inputs. If <code>NULL</code> then checks are not conducted.</p></dd>


<dt>anc_clients_year_t2_num_monhts</dt>
<dd><p>Number of months of reporting reflected in the year(s) recorded in <code>anc_clients_year_t2</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>See example datasets for examples of required template for data sets. *<code>_survey_ids</code> must be reflected
in <code>survey_hiv_indicators</code>.</p>
<p>ART coverage and VLS survey data should not be included from the same survey. This is checked
by the function call and will throw an error.</p>
<p>The <code>deff_*</code> arguments are approximate design effects used to scale the effective sample size for survey
observations. Stratified design effects are will not be the same as full survey DEFF and there is not
a straightforward way to approximate these.</p>
<p>The option <code>use_aggregate_survey = TRUE</code> allows for aggregate versions of survey data to be used in model
fitting, for example age 15-49 prevalence instead of five-year age group prevalence or province-level
survey data instead of district level data. This maybe useful if cluster coordinates or survey microdata
are not available. This option assumes that the <code>survey_hiv_indicators</code> is alreaddy subsetted to exactly
the data to be used. All stratifications must also appear in the <code>naomi_data$mf_out</code> stratifications.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="demo_survey_hiv_indicators.html">demo_survey_hiv_indicators</a>, <a href="demo_anc_testing.html">demo_anc_testing</a>, <a href="demo_anc_testing.html">demo_art_number</a>, <a href="quarter_year_labels.html">convert_quarter_id</a></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeff Eaton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

